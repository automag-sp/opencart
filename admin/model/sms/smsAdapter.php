<?php  define("DIR_SMS_JS", "view/javascript/"); define("DIR_SMS_IMG", "view/image/"); if(defined("HTTP_CATALOG")) { define("DELIVERY_URL", HTTP_CATALOG."index.php?route=sms/delivery"); } define("SMS_WEB_URL", "www.cart-sms.com"); define("SMS_STAT_BACK_COLOR", "#fdfdfd"); class SmsAdapterController extends Controller { protected $marketingFilter; static public $colors = array( 0 => "#D47705", 1 => "#4068C4", 2 => "#C438E0", 3 => "#38D8E0", 4 => "#38E043", 5 => "#EFF43A", 6 => "#F79E0E", 7 => "#1802B9", 8 => "#F48CD2", 9 => "#09FF00", ); public static $MarketingTemplateCustomers = array( "firstname" => "firstname", "lastname" => "lastname", "email" => "email", "telephone" => "telephone" ); public static $MarketingTemplateShop = array( "shop_name" => "shop_name", "shop_domain" => "shop_domain", "shop_email" => "shop_email", "shop_phone" => "shop_phone" ); public static $MarketingTemplateCoupons = array( "name" => "coupon_name", "code" => "coupon_code", "type" => "coupon_type", "discount" => "coupon_discount", "total" => "coupon_total", "date_start" => "coupon_date_start", "date_end" => "coupon_date_end", "uses_total" => "coupon_uses_total", "uses_customer" => "coupon_uses_customer" );  protected function index() { $this->load->model('sms/main'); $this->load->model('sms/hooks'); require_once($this->model_sms_hooks->getLanguageDirectory()); if(method_exists($this , "createFilter") && defined("SMS_FILTER_ON")) { $this->createFilter(); } $i1238ed0a93a32faf9485892fe4a454435972b1cc = new UserProfile($this->getDb()); if(!($i1238ed0a93a32faf9485892fe4a454435972b1cc->getUsername() && $i1238ed0a93a32faf9485892fe4a454435972b1cc->getPassword()) && $_GET["route"] != "sms/profile") { $this->displayError(v_smshistory_usernotactive); $this->smsRedirect($this->getLink("sms/profile")); } $this->startup(); $i465a8b7201badbc968016c38c09450ea6ad0d1d5="sms/default.tpl"; $this->template = $i465a8b7201badbc968016c38c09450ea6ad0d1d5; $this->children = array( 'common/header', 'common/footer' ); $this->data["html"] = $this->display(); $this->response->setOutput($this->render(TRUE)); } protected function getLink($ia30d71ef0b3060ca66423855ab834b4bcebf1ae6, $i3c3fd557829f0a1930d2d0911e45b0777d9f5412 = "") { if(is_object($this->url) && method_exists($this->url,"link")) { return $this->url->link($ia30d71ef0b3060ca66423855ab834b4bcebf1ae6, 'token=' . $this->session->data['token'] . $i3c3fd557829f0a1930d2d0911e45b0777d9f5412, 'SSL'); } else { return "index.php?route=".$ia30d71ef0b3060ca66423855ab834b4bcebf1ae6.$i3c3fd557829f0a1930d2d0911e45b0777d9f5412; } }  public function Execute($i5219ccda793bda0dd2dd47ede46789ad8051decb) { return $this->model_sms_main->Execute($i5219ccda793bda0dd2dd47ede46789ad8051decb); } public function lastInsertId() { return $this->model_sms_main->lastInsertId(); } public function escape($i0e4db502c191d65f4204e889a1aff420bded9efe) { return $this->model_sms_main->escape($i0e4db502c191d65f4204e889a1aff420bded9efe); } public function getDb() { return $this->model_sms_main->getDb(); }  protected function createFilter() { $this->load->model('sms/main'); $this->marketingFilter = new SmsFilter($this); $this->marketingFilter->addFilter( "select", "type", v_smsmarketing_typ, array( "\$eval = {0}==1;" => "SELECT customer_id FROM ".DB_PREFIX."address where (company IS NOT NULL AND company NOT LIKE '')", "\$eval = {0}==2;" => "SELECT customer_id FROM ".DB_PREFIX."address where (company IS NULL OR company = '')" ), array(-1 => v_smsmarketing_allcustomers, 1 => v_smsmarketing_companycustomers, 2 => v_smsmarketing_privatecustomers), "#9acd32" )->addFilter( "select", "country", v_smsmarketing_country, "SELECT customer_id FROM ".DB_PREFIX."address where country_id=\"{0}\"", $this->getCountry(), "#005784" )->addFilter( "select", "group", v_smsmarketing_groups, "SELECT customer_id FROM ".DB_PREFIX."customer where customer_group_id=\"{0}\"", $this->getGroup(), "#d2b48c" )->addFilter( "select", "newsletter", v_smsmarketing_news, "SELECT customer_id FROM ".DB_PREFIX."customer where newsletter=\"{0}\"", array(-1 => v_smsmarketing_all, 1 => v_smsmarketing_yes, 0 => v_smsmarketing_no), "#cd1818" )->addFilter( "select", "store", v_smsmarketing_store, "SELECT customer_id FROM ".DB_PREFIX."customer where store_id = \"{0}\"", $this->getStore(), "#8880aa" )->addFilter( "input", "firstname", v_smsmarketing_firstname, "SELECT customer_id FROM ".DB_PREFIX."customer WHERE firstname like '%{0}%'", null, "#c71585" )->addFilter( "input", "lastname", v_smsmarketing_lastname, "SELECT customer_id FROM ".DB_PREFIX."customer WHERE lastname like '%{0}%'", null, "#006600" )->addFilter( "input", "postcode", str_replace(":", "", v_adminsmsprofile_zip), "SELECT customer_id FROM ".DB_PREFIX."address WHERE postcode = '{0}'", null, "#903689" )->addFilter( "input", "city", v_smsmarketing_city, "SELECT customer_id FROM ".DB_PREFIX."address where city like '%{0}%'", null, "#ff8000" )->addFilter( "datetime", "register", v_smsmarketing_registerfrom, "SELECT customer_id FROM ".DB_PREFIX."customer where date_added>=\"{0}\" and date_added<=\"{1}\"", null, "#907523" )->addFilter( "relationValue", "order", v_customersms_order, array( "\$eval = {0}==0;" => "SELECT ".DB_PREFIX."order.customer_id, max(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total < '{1}';", "\$eval = {0}==1;" => "SELECT ".DB_PREFIX."order.customer_id, max(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total > '{1}';", "\$eval = {0}==2;" => "SELECT ".DB_PREFIX."order.customer_id, max(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total = '{1}';", "\$eval = {0}==3;" => "SELECT ".DB_PREFIX."order.customer_id, max(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total != '{1}';" ), array(array(0 => "<", 1 => ">", 2 => "=", 3 => "≠"), null), "#902080" )->addFilter( "relationValue", "sumOrder", "∑ " . v_customersms_order, array( "\$eval = {0}==0;" => "SELECT ".DB_PREFIX."order.customer_id, sum(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total < '{1}';", "\$eval = {0}==1;" => "SELECT ".DB_PREFIX."order.customer_id, sum(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total > '{1}';", "\$eval = {0}==2;" => "SELECT ".DB_PREFIX."order.customer_id, sum(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total = '{1}';", "\$eval = {0}==3;" => "SELECT ".DB_PREFIX."order.customer_id, sum(".DB_PREFIX."order.total) as total FROM ".DB_PREFIX."order GROUP BY ".DB_PREFIX."order.customer_id HAVING total != '{1}';" ), array(array(0 => "<", 1 => ">", 2 => "=", 3 => "≠"), null), "#886543" )->addFilter( "input", "product", v_adminsms_product, "SELECT ".DB_PREFIX."order.customer_id FROM ".DB_PREFIX."order INNER JOIN ".DB_PREFIX."order_product ON ".DB_PREFIX."order_product.order_id = ".DB_PREFIX."order.order_id WHERE ".DB_PREFIX."order_product.`name` LIKE \"%{0}%\" OR ".DB_PREFIX."order_product.`model` LIKE \"%{0}%\" GROUP BY ".DB_PREFIX."order.customer_id;", null, "#77aacc" ); } protected function getTemplateRepalce() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = "<script language=\"javascript\"> function getTemplateValues(text) {"; $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->getTemplateReplaceCustomers(); $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->getTemplateReplaceShop(); $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->getTemplateReplaceCoupon(); $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= " return text; } </script>"; return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getTemplateReplaceCustomers() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT ".implode(array_keys(self::$MarketingTemplateCustomers),", ")." FROM `".DB_PREFIX."customer` ORDER BY customer_id DESC LIMIT 1"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach(self::$MarketingTemplateCustomers as $i7baa31be52215025da340cfec29600d8d2b327c4 => $i9002e83be34cd5231edf8dad3f43d5fabe403d59) { $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= 'text=text.replaceAll("{'.$i9002e83be34cd5231edf8dad3f43d5fabe403d59.'}","'.htmlspecialchars($ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4]).'");'; } } return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getTemplateReplaceShop() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = $this->getShopVariables(0); foreach(self::$MarketingTemplateShop as $i7baa31be52215025da340cfec29600d8d2b327c4 => $i9002e83be34cd5231edf8dad3f43d5fabe403d59) { $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= 'text=text.replaceAll("{'.$i9002e83be34cd5231edf8dad3f43d5fabe403d59.'}","'.htmlspecialchars($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[$i7baa31be52215025da340cfec29600d8d2b327c4]).'");'; } return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getTemplateReplaceCoupon() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; $i112887deb86b8159750906e704b4be8591284e8c = $this->model_setting_setting->getSetting("config"); $id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d = $i112887deb86b8159750906e704b4be8591284e8c["config_currency"]; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT ".implode(array_keys(self::$MarketingTemplateCoupons),", ")." FROM `".DB_PREFIX."coupon` ORDER BY coupon_id DESC LIMIT 1"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach(self::$MarketingTemplateCoupons as $i7baa31be52215025da340cfec29600d8d2b327c4 => $i9002e83be34cd5231edf8dad3f43d5fabe403d59) { if($i7baa31be52215025da340cfec29600d8d2b327c4 == "type") { if($ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4] == "P") { $ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4] = "%"; } else { $ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4] = strtoupper($id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d); } } if($i7baa31be52215025da340cfec29600d8d2b327c4 == "discount" || $i7baa31be52215025da340cfec29600d8d2b327c4 == "total") { $ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4] = number_format($ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4], 2); } $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= 'text=text.replaceAll("{'.$i9002e83be34cd5231edf8dad3f43d5fabe403d59.'}","'.$ic6e936002fe51b97bc1b95f337c09606ceb011de->row[$i7baa31be52215025da340cfec29600d8d2b327c4].'");'; } } return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getCountry() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = array(-1 => v_smsmarketing_allcountries); $i5219ccda793bda0dd2dd47ede46789ad8051decb = "SELECT * FROM ".DB_PREFIX."country order by name;"; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute($i5219ccda793bda0dd2dd47ede46789ad8051decb); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $iae8c74e5273dec25096dbae362493a9f609ecfc8[$i43ef5aef4168652439ef5de195405ced9f0f7952['country_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name']; } } return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getGroup() { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = array(-1 => v_smsmarketing_all); $iee06c50a900aab6d941336d33d2d03e67520187e = $this->language->get('code'); $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM ".DB_PREFIX."language where code = '".$iee06c50a900aab6d941336d33d2d03e67520187e."'"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["language_id"]; $i5219ccda793bda0dd2dd47ede46789ad8051decb = "SELECT * FROM ".DB_PREFIX."customer_group"; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute($i5219ccda793bda0dd2dd47ede46789ad8051decb); if(!isset($ic6e936002fe51b97bc1b95f337c09606ceb011de->row["name"])) { $i5219ccda793bda0dd2dd47ede46789ad8051decb = "SELECT * FROM ".DB_PREFIX."customer_group_description WHERE language_id = $i4c443e2d213f0c0f293f064748a7a6eb60d37173 ORDER BY name"; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute($i5219ccda793bda0dd2dd47ede46789ad8051decb); } if ($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach ($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $iae8c74e5273dec25096dbae362493a9f609ecfc8[$i43ef5aef4168652439ef5de195405ced9f0f7952['customer_group_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name']; } } } return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getStore($ib3c873abb034e0eb4fceeb049b3f2e0153ae435e = true) { if($ib3c873abb034e0eb4fceeb049b3f2e0153ae435e) { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = array(-1 => v_smsmarketing_all); } else { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = array(); } $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM ".DB_PREFIX."setting WHERE `key`= 'config_name'"); if(isset($ic6e936002fe51b97bc1b95f337c09606ceb011de->row["store_id"])) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $iae8c74e5273dec25096dbae362493a9f609ecfc8[$i43ef5aef4168652439ef5de195405ced9f0f7952["store_id"]] = $i43ef5aef4168652439ef5de195405ced9f0f7952["value"]; } } else { $iae8c74e5273dec25096dbae362493a9f609ecfc8[0] = $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["value"]; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT store_id, name FROM ".DB_PREFIX."store"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $iae8c74e5273dec25096dbae362493a9f609ecfc8[$i43ef5aef4168652439ef5de195405ced9f0f7952["store_id"]] = $i43ef5aef4168652439ef5de195405ced9f0f7952["name"]; } } } ksort($iae8c74e5273dec25096dbae362493a9f609ecfc8); return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getMarketingCustomerSQL($i59353ed91761a953be973155708ab9fe00e5043d, $ie41b869258663f171bb31e8de30b1d0acdd3f20e) { return "SELECT ".DB_PREFIX."customer.*, " . "".DB_PREFIX."address.city, " . "".DB_PREFIX."address.country_id " . "FROM ".DB_PREFIX."customer " . "LEFT JOIN ".DB_PREFIX."address ON ".DB_PREFIX."customer.customer_id = ".DB_PREFIX."address.customer_id " . "WHERE telephone NOT LIKE '' ".$i59353ed91761a953be973155708ab9fe00e5043d." ".$ie41b869258663f171bb31e8de30b1d0acdd3f20e." GROUP BY ".DB_PREFIX."customer.customer_id ORDER BY lastname"; } protected function getMarketingDisabledSQL($if2c1a4a5b60f863cf8af9496cf4c7fd2ac66c47f) { return " AND ".DB_PREFIX."customer.customer_id NOT IN (".implode(",", $if2c1a4a5b60f863cf8af9496cf4c7fd2ac66c47f).")"; } protected function getMarketingFilteredSQL($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b) { return " AND ".DB_PREFIX."customer.customer_id IN (".implode(",", $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b).")"; } protected function getAddressBook($ib584f54a0be935f7ee8332f9a65155eb2870a7be) { return "SELECT ".DB_PREFIX."customer.*, ".DB_PREFIX."address.city,".DB_PREFIX."address.country_id FROM ".DB_PREFIX."customer LEFT JOIN ".DB_PREFIX."address ON ".DB_PREFIX."customer.customer_id = ".DB_PREFIX."address.customer_id WHERE ".DB_PREFIX."customer.lastname like '".$this->escape($ib584f54a0be935f7ee8332f9a65155eb2870a7be)."%' AND ".DB_PREFIX."customer.telephone NOT LIKE '' GROUP BY ".DB_PREFIX."customer.customer_id ORDER BY ".DB_PREFIX."customer.lastname"; } protected function historySQL($i3964ab17d4e3c76c12a1b84b29be7bf6f6484dc3, $idacee85242f68129250771eb362503f41015a410, $i62b6b7ccb62a11971c871b454301b89c98c3f56c, $ic1a4c27c214a05531ea239070fe6c96651ba595d, $ic08e2f2a5495d949a6cd1f6619cd5dbd53d8a7be) { return "SELECT ".DB_PREFIX."sp_sms_history.*, ".DB_PREFIX."customer.firstname, ".DB_PREFIX."customer.lastname, ".DB_PREFIX."sp_admins.name adminName FROM ".DB_PREFIX."sp_sms_history LEFT JOIN ".DB_PREFIX."customer ON ".DB_PREFIX."sp_sms_history.customer_ID = ".DB_PREFIX."customer.customer_id LEFT JOIN ".DB_PREFIX."sp_admins ON ".DB_PREFIX."sp_sms_history.admin_ID = ".DB_PREFIX."sp_admins.ID WHERE date like '".$this->escape($i3964ab17d4e3c76c12a1b84b29be7bf6f6484dc3)."'".$this->escape($idacee85242f68129250771eb362503f41015a410)."".$this->escape($i62b6b7ccb62a11971c871b454301b89c98c3f56c)." order by ID desc limit ".$this->escape($ic1a4c27c214a05531ea239070fe6c96651ba595d).", ".$this->escape($ic08e2f2a5495d949a6cd1f6619cd5dbd53d8a7be).""; } protected function getShopVariables($i14d625e8db8948bbc793a0f929fe5db0b5cd898c) { if(!isset($i14d625e8db8948bbc793a0f929fe5db0b5cd898c)) { $i14d625e8db8948bbc793a0f929fe5db0b5cd898c = 0; } $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM ".DB_PREFIX."setting where `key` IN ('config_name','config_email','config_telephone')"); if ($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach ($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { if(!isset($i43ef5aef4168652439ef5de195405ced9f0f7952['store_id']) || $i43ef5aef4168652439ef5de195405ced9f0f7952['store_id'] == $i14d625e8db8948bbc793a0f929fe5db0b5cd898c) { if($i43ef5aef4168652439ef5de195405ced9f0f7952['key']=="config_name") { $i1b4593e77e14bf2e7048f7b02f24756466d0ffad = $i43ef5aef4168652439ef5de195405ced9f0f7952['value']; } if($i43ef5aef4168652439ef5de195405ced9f0f7952['key']=="config_email") { $i156f75e4c32df821d1b467ef5c9af03a75b76867 = $i43ef5aef4168652439ef5de195405ced9f0f7952['value']; } if($i43ef5aef4168652439ef5de195405ced9f0f7952['key']=="config_telephone") { $i87395dcafb6eb7221410dbcd87e9e8ce0007214a3d81df737ce9896f2d187f1f36ec465771bf09c = $i43ef5aef4168652439ef5de195405ced9f0f7952['value']; } } } } $i5ca425460f7dbd64a82fa844eed01062be6a63d4 = HTTP_CATALOG; return array("shop_name" => $i1b4593e77e14bf2e7048f7b02f24756466d0ffad, "shop_domain" => $i5ca425460f7dbd64a82fa844eed01062be6a63d4, "shop_email" => $i156f75e4c32df821d1b467ef5c9af03a75b76867, "shop_phone" => $i87395dcafb6eb7221410dbcd87e9e8ce0007214a3d81df737ce9896f2d187f1f36ec465771bf09c); } protected function getTimezoneSettings() { $this->load->model('setting/setting'); $i2a25394bbe4be61fd85d98ed1673d9bd656ba0ae = $this->model_setting_setting->getSetting("sms"); $this->timezone = $i2a25394bbe4be61fd85d98ed1673d9bd656ba0ae["sms_timezone"]; $i3964ab17d4e3c76c12a1b84b29be7bf6f6484dc3 = new DateTime(null, new DateTimeZone("Europe/Prague")); if(strlen(trim($this->timezone)) == 0) { $this->timezone = date_default_timezone_get(); } date_default_timezone_set($this->timezone); return date("Y-m-d H:i:s", $i3964ab17d4e3c76c12a1b84b29be7bf6f6484dc3->format('U')); } protected function getCoupons() { $i47945e993004c137f2a9e8ebe8c6a37da82bbd94 = array(); $this->load->model('setting/setting'); $i112887deb86b8159750906e704b4be8591284e8c = $this->model_setting_setting->getSetting("config"); $id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d = $i112887deb86b8159750906e704b4be8591284e8c["config_currency"]; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM `".DB_PREFIX."coupon` WHERE `status` = '1'"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { if($i43ef5aef4168652439ef5de195405ced9f0f7952["type"] == "P") { $i43ef5aef4168652439ef5de195405ced9f0f7952["type"] = "%"; } else { $i43ef5aef4168652439ef5de195405ced9f0f7952["type"] = strtoupper($id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d); } $i47945e993004c137f2a9e8ebe8c6a37da82bbd94[$i43ef5aef4168652439ef5de195405ced9f0f7952["coupon_id"]] = $i43ef5aef4168652439ef5de195405ced9f0f7952; } } return $i47945e993004c137f2a9e8ebe8c6a37da82bbd94; } protected function getCouponSelect($i84bc545bbb2cff247d6ae6400af05eeb443267d9) { $i84bc545bbb2cff247d6ae6400af05eeb443267d9elect = array(-1 => "- ".v_marketing_none." -"); foreach($i84bc545bbb2cff247d6ae6400af05eeb443267d9 as $i7baa31be52215025da340cfec29600d8d2b327c4 => $ie10f888510a016f5ea5f46b736afa9e60fb62395) { $i84bc545bbb2cff247d6ae6400af05eeb443267d9elect[$i7baa31be52215025da340cfec29600d8d2b327c4] = $ie10f888510a016f5ea5f46b736afa9e60fb62395["name"]; } return $i84bc545bbb2cff247d6ae6400af05eeb443267d9elect; } protected function getStoreForm($i14d625e8db8948bbc793a0f929fe5db0b5cd898c) { return v_smsmarketing_store." ".SmsController::getSelect(array("name" => "store"), $this->getStore(false), $i14d625e8db8948bbc793a0f929fe5db0b5cd898c); } protected function getCouponForm($i84bc545bbb2cff247d6ae6400af05eeb443267d9, $i0b528d1be9ee802a3400dc2dc8e66f5f242b1790) { $iae8c74e5273dec25096dbae362493a9f609ecfc8 = v_marketing_coupon.": ".SmsController::getSelect(array("name" => "coupon", "onchange" => "toggleCouponVariables();", "id" => "couponSelect"), $this->getCouponSelect($i84bc545bbb2cff247d6ae6400af05eeb443267d9), $i0b528d1be9ee802a3400dc2dc8e66f5f242b1790). " <a href=".$this->getLink("sale/coupon/insert").">".v_marketing_coupon_create."</a>"; $iae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<p id=\"couponVariables\" class=\"hidden\">".$this->getTags(self::$MarketingTemplateCoupons)."</p>"; return $iae8c74e5273dec25096dbae362493a9f609ecfc8; } protected function getCouponData($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = array(); $this->load->model('setting/setting'); $i112887deb86b8159750906e704b4be8591284e8c = $this->model_setting_setting->getSetting("config"); $id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d = $i112887deb86b8159750906e704b4be8591284e8c["config_currency"]; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT ".implode(array_keys(self::$MarketingTemplateCoupons),", ")." FROM `".DB_PREFIX."coupon` WHERE `coupon_id` = '".$this->escape($i87395dcafb6eb7221410dbcd87e9e8ce0007214a)."'"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { if($ic6e936002fe51b97bc1b95f337c09606ceb011de->row["type"] == "P") { $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["type"] = "%"; } else { $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["type"] = strtoupper($id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d); } $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["discount"] = number_format($ic6e936002fe51b97bc1b95f337c09606ceb011de->row["discount"], 2); $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["total"] = number_format($ic6e936002fe51b97bc1b95f337c09606ceb011de->row["total"], 2); $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = $ic6e936002fe51b97bc1b95f337c09606ceb011de->row; } return $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89; }  protected function smsProduct($id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d, $ibde9096c2620747ae85e1b4216c173b802a53e29, $i62259e4d2a109cd2e2457f7ac21d96138638075f, $i3f5d7e20ec014ab7b44ef5a1853777312baa7ca4) { $ic513334e573d39745b582ce574d5daa04c56ef98 = 0; $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "language"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $ia9b408995b78c94a78ae8cfc58351aa2f4baf4b9[$i43ef5aef4168652439ef5de195405ced9f0f7952["code"]] = $i43ef5aef4168652439ef5de195405ced9f0f7952["language_id"]; } } foreach($id37ad94a7a9cd11fcc3bd8a5d861c0ee1b309e8d as $iac7338fa6e265d135828e1c7cb66296699ef55f5) { if(isset($i3f5d7e20ec014ab7b44ef5a1853777312baa7ca4[$iac7338fa6e265d135828e1c7cb66296699ef55f5])) { $i6ac79bdc940ae4cdd0107c72e3d0d238031e3903 = $i3f5d7e20ec014ab7b44ef5a1853777312baa7ca4[$iac7338fa6e265d135828e1c7cb66296699ef55f5]; } else { $i6ac79bdc940ae4cdd0107c72e3d0d238031e3903 = 0; } $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "product INNER JOIN " . DB_PREFIX . "product_to_store ON " . DB_PREFIX . "product.product_id = " . DB_PREFIX . "product_to_store.product_id WHERE model like 'InfoSMS' AND store_id = " . $this->escape($ibde9096c2620747ae85e1b4216c173b802a53e29) . ";"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $ic513334e573d39745b582ce574d5daa04c56ef98 = $i43ef5aef4168652439ef5de195405ced9f0f7952["product_id"]; } } if($ic513334e573d39745b582ce574d5daa04c56ef98 == 0) { $this->Execute("INSERT INTO `" . DB_PREFIX . "product` (`model`, `location`, `quantity`, `stock_status_id`, `image`, `manufacturer_id`, `shipping`, `price`, `tax_class_id`, `date_available`, `weight`, `weight_class_id`, `length`, `width`, `height`, `length_class_id`, `status`, `date_added`, `date_modified`, `viewed`) VALUES ('InfoSMS', '', 1000, 7, 'data/sms/logocart.png', 0, 0, '" . $this->escape($i6ac79bdc940ae4cdd0107c72e3d0d238031e3903) . "', 0, 'CURRENT_DATE()', 0.00000000, 1, 0.00000000, 0.00000000, 0.00000000, 1, 1, 'NOW()', '0000-0-0 00:00:00', 0);"); $ic513334e573d39745b582ce574d5daa04c56ef98 = $this->lastInsertId(); $this->Execute("INSERT INTO `" . DB_PREFIX . "product_to_store` (`product_id`, `store_id`) VALUES ('" . $this->escape($ic513334e573d39745b582ce574d5daa04c56ef98) . "', '" . $this->escape($ibde9096c2620747ae85e1b4216c173b802a53e29) . "')"); } else { $this->Execute("UPDATE " . DB_PREFIX . "product set price='" . $this->escape($i6ac79bdc940ae4cdd0107c72e3d0d238031e3903) . "' where product_id=" . $this->escape($ic513334e573d39745b582ce574d5daa04c56ef98)); } if(is_array($i62259e4d2a109cd2e2457f7ac21d96138638075f)) { foreach($i62259e4d2a109cd2e2457f7ac21d96138638075f as $i7baa31be52215025da340cfec29600d8d2b327c4 => $i0e4db502c191d65f4204e889a1aff420bded9efe) { $this->Execute("REPLACE INTO `" . DB_PREFIX . "product_description` (`product_id`, `language_id`, `name`, `description`) VALUES ('$ic513334e573d39745b582ce574d5daa04c56ef98', '" . $this->escape($ia9b408995b78c94a78ae8cfc58351aa2f4baf4b9[$i7baa31be52215025da340cfec29600d8d2b327c4]) . "', '" . $this->escape($i0e4db502c191d65f4204e889a1aff420bded9efe) . "', '');"); } } $ic513334e573d39745b582ce574d5daa04c56ef98 = 0; } } public function getDefaultCurrency() { return "SELECT * FROM " . DB_PREFIX . "setting WHERE `key`= 'config_currency'"; } public function getLanguages() { return "SELECT * FROM " . DB_PREFIX . "language where status = 1"; } public function getLanguageId() { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = 1; $iee06c50a900aab6d941336d33d2d03e67520187e = substr($this->language->get('code'), 0, 2); $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "language where code = '" . $iee06c50a900aab6d941336d33d2d03e67520187e . "'"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["language_id"]; } else { $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "language LIMIT 1"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $ic6e936002fe51b97bc1b95f337c09606ceb011de->row["language_id"]; } } return $i4c443e2d213f0c0f293f064748a7a6eb60d37173; }  public function loadHooksForOrdersAdmin() { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $this->getLanguageId(); if($i4c443e2d213f0c0f293f064748a7a6eb60d37173 != null) { $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "order_status where language_id = '" . $i4c443e2d213f0c0f293f064748a7a6eb60d37173 . "' order by order_status_id ASC"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $this->res_groups[0][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']][] = "actionOrderStatusPostUpdate"; $this->res_hooks_info["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name'] . " [" . $i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id'] . "]"; $this->res_hooks_template["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = v_smsprestashop_sqltemplate11 . strtolower($i43ef5aef4168652439ef5de195405ced9f0f7952['name']) . v_smsprestashop_sqltemplate111; $this->res_hooks_notice["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = v_smsprestashop_notice . "<br /> {customer_id}, {customer_email}, {customer_company}, {customer_lastname}, {customer_firstname}, {customer_address}, {customer_postcode}, {customer_city}, {customer_country}, {customer_state}, {customer_phone}, {customer_mobile}, {customer_vat_number}, {customer_invoice_company}, {customer_invoice_lastname}, {customer_invoice_firstname}, {customer_invoice_address}, {customer_invoice_postcode}, {customer_invoice_city}, {customer_invoice_country}, {customer_invoice_state}, {customer_invoice_phone}, {customer_invoice_mobile}, {customer_invoice_vat_number}<br /><br />{shop_domain}, {shop_name}, {shop_email}, {shop_phone}<br /><br />{order_id}, {order_payment}, {order_total_paid}, {order_currency}, {order_date}, {order_date1}, {order_date2}, {order_date3}, {order_date4}, {order_date5}, {order_date6}, {order_date7}, {order_time}, {order_time1}<br /><br /> {order_products1}, {order_products2}, {order_products3}, {order_products4}, {order_products5}, {order_products6}, {order_products7}, {order_products8}<br /><br />{employee_id}, {employee_email}, {customer_message}"; $this->res_hooks_background["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = "#0092BA"; $this->res_hooks_icon["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = ""; } } return true; } return false; } public function loadHooksForReturnsAdmin() { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $this->getLanguageId(); if($i4c443e2d213f0c0f293f064748a7a6eb60d37173 != null) { $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "return_status WHERE language_id = " . $this->escape($i4c443e2d213f0c0f293f064748a7a6eb60d37173) . " ORDER BY return_status_id ASC"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $this->res_groups[5][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']][] = "actionReturnGoodStatus"; $this->res_hooks_info["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name'] . " [" . $i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id'] . "]"; $this->res_hooks_template["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = v_smsprestashop_return_status_admin . strtolower($i43ef5aef4168652439ef5de195405ced9f0f7952['name']) . v_smsprestashop_return_status_admin2; $this->res_hooks_notice["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = "{customer_address}, {customer_city}, {customer_company}, {customer_country_id}, {customer_country}, {customer_email}, {customer_firstname}, {customer_id}, {customer_invoice_address}, {customer_invoice_city}, {customer_invoice_company}, {customer_invoice_country_id}, {customer_invoice_country}, {customer_invoice_firstname}, {customer_invoice_lastname}, {customer_invoice_mobile}, {customer_invoice_phone}, {customer_invoice_postcode}, {customer_invoice_state}, {customer_lastname}, {customer_message}, {customer_mobile}, {customer_phone}, {customer_postcode}, {customer_state}, {date_ordered}<br /><br />{employee_email}, {employee_id}<br /><br />{order_currency}, {order_date1}, {order_date2}, {order_date3}, {order_date4}, {order_date5}, {order_date6}, {order_date7}, {order_id}, {order_shipping_number}, {order_time1}, {order_time}, {order_total_paid}<br /><br />{product_id}, {product_model}, {product_name}, {product_quantity}<br /><br />{return_action_id}, {return_action}, {return_date}, {return_id}, {return_reason_id}, {return_reason}, {return_status_id}, {return_status}<br /><br /> {shop_email}, {shop_id}, {shop_name}, {shop_phone}"; $this->res_hooks_background["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = "#0092BA"; $this->res_hooks_icon["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = ""; } } return true; } return false; } public function loadHooksForOrdersCustomers() { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $this->getLanguageId(); if($i4c443e2d213f0c0f293f064748a7a6eb60d37173 != null) { $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "order_status WHERE language_id = " . $this->escape($i4c443e2d213f0c0f293f064748a7a6eb60d37173) . " ORDER BY order_status_id ASC"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $this->res_groups[0][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']][] = "actionOrderStatusPostUpdate"; $this->res_hooks_info["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name'] . " [" . $i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id'] . "]"; $this->res_hooks_template["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = v_smsprestashop_sqltemplate211 . strtolower($i43ef5aef4168652439ef5de195405ced9f0f7952['name']) . v_smsprestashop_sqltemplate2111; $this->res_hooks_notice["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = v_smsprestashop_notice . "<br />{customer_id}, {customer_email}, {customer_company}, {customer_lastname}, {customer_firstname}, {customer_address}, {customer_postcode}, {customer_city}, {customer_country}, {customer_state}, {customer_phone}, {customer_mobile}, {customer_vat_number}, {customer_invoice_company}, {customer_invoice_lastname}, {customer_invoice_firstname}, {customer_invoice_address}, {customer_invoice_postcode}, {customer_invoice_city}, {customer_invoice_country}, {customer_invoice_state}, {customer_invoice_phone}, {customer_invoice_mobile}, {customer_invoice_vat_number}<br /><br />{shop_domain}, {shop_name}, {shop_email}, {shop_phone}<br /><br />{order_id}, {order_payment}, {order_total_paid}, {order_currency}, {order_date}, {order_date1}, {order_date2}, {order_date3}, {order_date4}, {order_date5}, {order_date6}, {order_date7}, {order_time}, {order_time1}<br /><br /> {order_products1}, {order_products2}, {order_products3}, {order_products4}, {order_products5}, {order_products6}, {order_products7}, {order_products8}<br /><br />{employee_id}, {employee_email}, {customer_message}"; $this->res_hooks_background["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = "#0092BA"; $this->res_hooks_icon["actionOrderStatusPostUpdate"][$i43ef5aef4168652439ef5de195405ced9f0f7952['order_status_id']] = ""; } } return true; } return false; } public function loadHooksForReturnsCustomers() { $i4c443e2d213f0c0f293f064748a7a6eb60d37173 = $this->getLanguageId(); if($i4c443e2d213f0c0f293f064748a7a6eb60d37173 != null) { $ic6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "return_status WHERE language_id = " . $this->escape($i4c443e2d213f0c0f293f064748a7a6eb60d37173) . " ORDER BY return_status_id ASC"); if($ic6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($ic6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i43ef5aef4168652439ef5de195405ced9f0f7952) { $this->res_groups[5][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']][] = "actionReturnGoodStatus"; $this->res_hooks_info["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = $i43ef5aef4168652439ef5de195405ced9f0f7952['name'] . " [" . $i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id'] . "]"; $this->res_hooks_template["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = v_smsprestashop_return_status_customer . strtolower($i43ef5aef4168652439ef5de195405ced9f0f7952['name']) . v_smsprestashop_return_status_customer2; $this->res_hooks_notice["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = v_smsprestashop_notice . "{customer_address}, {customer_city}, {customer_company}, {customer_country_id}, {customer_country}, {customer_email}, {customer_firstname}, {customer_id}, {customer_invoice_address}, {customer_invoice_city}, {customer_invoice_company}, {customer_invoice_country_id}, {customer_invoice_country}, {customer_invoice_firstname}, {customer_invoice_lastname}, {customer_invoice_mobile}, {customer_invoice_phone}, {customer_invoice_postcode}, {customer_invoice_state}, {customer_lastname}, {customer_message}, {customer_mobile}, {customer_phone}, {customer_postcode}, {customer_state}, {date_ordered}<br /><br />{employee_email}, {employee_id}<br /><br />{order_currency}, {order_date1}, {order_date2}, {order_date3}, {order_date4}, {order_date5}, {order_date6}, {order_date7}, {order_id}, {order_shipping_number}, {order_time1}, {order_time}, {order_total_paid}<br /><br />{product_id}, {product_model}, {product_name}, {product_quantity}<br /><br />{return_action_id}, {return_action}, {return_date}, {return_id}, {return_reason_id}, {return_reason}, {return_status_id}, {return_status}<br /><br />{shop_email}, {shop_id}, {shop_name}, {shop_phone}"; $this->res_hooks_background["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = "#0092BA"; $this->res_hooks_icon["actionReturnGoodStatus"][$i43ef5aef4168652439ef5de195405ced9f0f7952['return_status_id']] = ""; } } return true; } return false; } static public function setSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $i0e4db502c191d65f4204e889a1aff420bded9efe) { $_SESSION[$i8eb4a4396d35945caca6d04c38a7144aaa51a5f5] = serialize($i0e4db502c191d65f4204e889a1aff420bded9efe); } static public function getSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = null) { if(isset($_SESSION[$i8eb4a4396d35945caca6d04c38a7144aaa51a5f5])) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = unserialize($_SESSION[$i8eb4a4396d35945caca6d04c38a7144aaa51a5f5]); } return $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89; } static public function unsetSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5) { if(isset($_SESSION[$i8eb4a4396d35945caca6d04c38a7144aaa51a5f5])) { unset($_SESSION[$i8eb4a4396d35945caca6d04c38a7144aaa51a5f5]); } } static public function addToArraySession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $i0e4db502c191d65f4204e889a1aff420bded9efe) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = self::getSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, array()); $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[] = $i0e4db502c191d65f4204e889a1aff420bded9efe; self::setSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89); } static public function incSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $i7cac2c21ae76e411419318a7960be3261aba378f = 1) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = self::getSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, array()); $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 += $i7cac2c21ae76e411419318a7960be3261aba378f; self::setSession($iaaee681b2ae1be145203cdac9fbc2c183819e0dd, $i8eb4a4396d35945caca6d04c38a7144aaa51a5f5, $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89); } public function smsLinkAddressBook($ib584f54a0be935f7ee8332f9a65155eb2870a7be = "A") { return $this->getLink(filter_input(INPUT_GET, "route")) . '&ajaxAction=addressBook&letter='.$ib584f54a0be935f7ee8332f9a65155eb2870a7be; } public function smsLinkRestoreTemplate($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=restoreTemplate&template=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkDeleteTemplate($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=deleteSaveTemplate&template=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkSaveTemplate() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=saveTemplate"; } public function smsLinkSavedTemplate() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=loadTemplate"; } public function smsLinkHistoryReload() { return str_replace("&amp;", "&", $this->getLink("sms/history")).'&ajaxAction=reload'; } public function smsLinkAnswersReload() { return str_replace("&amp;", "&", $this->getLink("sms/answers")).'&ajaxAction=reload'; } public function smsLinkCustomerSMSMutation() { return $this->getLink(filter_input(INPUT_GET, "route")); } public function smsLinkCustomerSMSMutationSelect($iff3ebb3dc09765074cbc44bf85648fbb313741d9) { return $this->getLink(filter_input(INPUT_GET, "route"), '&submitEditMutation=1&submit=submitEditMutation&mutation=' . $iff3ebb3dc09765074cbc44bf85648fbb313741d9); } public function smsLinkRestoreMarketingTemplate($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=restoreTemplate&template=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkDeleteMarketingTemplate($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=deleteSaveTemplate&template=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkSaveMarketingTemplate() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=saveTemplate"; } public function smsLinkSavedMarketingTemplate() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=loadTemplate"; } public function smsLinkMarketingMore($i7baa31be52215025da340cfec29600d8d2b327c4) { return $this->getLink(filter_input(INPUT_GET, "route")) . '&ajaxAction=showCustomers&letter=' . strtolower($i7baa31be52215025da340cfec29600d8d2b327c4); } public function smsLinkCustomer($i1c935e77973f359446ebeec178b9049130734c99) { return $this->getLink('sale/customer/update', "&customer_id=".$i1c935e77973f359446ebeec178b9049130734c99); } public function smsLinkRemoveCustomerList($i1c935e77973f359446ebeec178b9049130734c99, $i00efcf19066e03a8c92199d52680ac49fc276029, $i7a98d658be588d4445424cf150e6ff12d597e50d) { return $this->getLink(filter_input(INPUT_GET, "route")). '&ajaxAction=deleteCustomer&customer='.htmlspecialchars($i1c935e77973f359446ebeec178b9049130734c99) . '&firstname=' . htmlspecialchars($i00efcf19066e03a8c92199d52680ac49fc276029) . '&lastname=' . htmlspecialchars($i7a98d658be588d4445424cf150e6ff12d597e50d); } public function smsLinkAddFilter() { return $this->getLink(filter_input(INPUT_GET, "route")); } public function smsLinkClearFilter() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=clearFilter"; } public function smsLinkSaveFilter() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=saveFilter"; } public function smsLinkRestoreFilter($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route"))."&ajaxAction=restoreFilter&filter=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkDeleteFilter($i87395dcafb6eb7221410dbcd87e9e8ce0007214a) { return $this->getLink(filter_input(INPUT_GET, "route"))."&ajaxAction=deleteSaveFilter&filter=".$i87395dcafb6eb7221410dbcd87e9e8ce0007214a; } public function smsLinkLoadFilter() { return $this->getLink(filter_input(INPUT_GET, "route")) . "&ajaxAction=loadFilter"; } public function smsLinkTimezone() { return $this->getLink("module/sms"); } public function smsLinkPageSave($i698e6f64ca4934e15ff68883b32c0e3ae044df24) { return $this->getLink(filter_input(INPUT_GET, "route")) . base64_decode("JmZpbHRlcj0=") .$i698e6f64ca4934e15ff68883b32c0e3ae044df24; } static public function smsLinkUnsetFilter($i7baa31be52215025da340cfec29600d8d2b327c4, $i89f751ccf6afda777c66b028c1f4d2bf7a371bbd) { return 'index.php?route=sms/marketing&token='.filter_input(INPUT_GET, "token").'&ajaxAction=deleteFilter&idFilter=' . $i7baa31be52215025da340cfec29600d8d2b327c4 . '&indexFilter=' . $i89f751ccf6afda777c66b028c1f4d2bf7a371bbd; } } class dbConnectorResult { public $num_rows = 0; public $rows = array(); public $row = array(); } ?>