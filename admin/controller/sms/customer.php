<?php define("SMS_CONTROLER_URL", DIR_APPLICATION . 'model/sms/'); require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'smsController.php'; class ControllerSmsCustomer extends SmsController { public $res_hooks = null; public $res_groups = null; public $res_hooks_info = null; public $res_hooks_template = null; public $res_hooks_notice = null; public $res_hooks_background = null; public $res_hooks_icon = null; public $js = ""; public $res_hooks_active = null; public $res_hooks_customer = null; public $use_unicode = 0; public $use_template = 0; public $use_template_name = ""; public $pol_templ = null; public function index() { parent::index(); } public function display() { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = parent::display(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= " <script language=\"javascript\"> var minus = '" . self::$minusImg . "'; var plus = '" . self::$plusImg . "'; var chartext = '" . v_customersms_jschars . "'; var v_adminsms_preview = '" . v_customersms_preview . "'; var v_adminsms_jstotalsms = '" . v_customersms_jstotalsms . "'; function getTemplateValues(text) { " . $this->loadvariables() . " return text; } </script> "; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'sms.js"></script>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'jquery.at.caret.min.js"></script>'; if(isset($_GET["mutation"])) { $this->use_template = htmlspecialchars($_GET["mutation"]); } if(!$this->use_template) { $this->use_template = "default"; $this->use_template_name = v_customersms_default; } $this->loadhooks(); $this->loadHooksForOrdersCustomers(); $this->loadHooksForReturnsCustomers(); $this->loadcustomerhooks($this->use_template); $this->loadMutationsnav($this->use_template); if($this->use_template == "default") { $this->use_template_name = v_customersms_default; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <h2>' . v_customersms_customersms . $this->use_template_name . (($this->use_template_name == v_customersms_default) ? v_customersms_langversion : "") . '</h2> <p>' . v_customersms_description . '</p> '; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->f3a5d89389e1e0c8afb0e051e976192ad06bf1ea7(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->f19c903003163c5fd13b5784fda3204bd086c372e(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->f272209a3143829a75b04748251af15ce810cbb18(); return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } public function postProcess($icddcd508600972f2dab78cd14f7612aa4dc19a18 = NULL, $i6b496fee24729ce6f7683ba88d5a87d6130049b5 = NULL, $ifab26c5df1e4ac29b64e0a4796b1f9165fe614a8 = NULL) { if($icddcd508600972f2dab78cd14f7612aa4dc19a18 == NULL && $i6b496fee24729ce6f7683ba88d5a87d6130049b5 == NULL) { return self::POST_ERROR; } if(isset($i6b496fee24729ce6f7683ba88d5a87d6130049b5['submitEditMutation'])) { $this->use_template = htmlentities($i6b496fee24729ce6f7683ba88d5a87d6130049b5['mutation'], ENT_COMPAT, 'UTF-8'); $this->use_template_name = $this->use_template; } if(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['submitCustomerSMS'])) { $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['status'], ENT_COMPAT, 'UTF-8'); $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['name'], ENT_COMPAT, 'UTF-8'); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['text'], ENT_COMPAT, 'UTF-8'); if(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['active'])) { $id227af2c9c9dc7fb91df7f7576cb79df3d47aaf4 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['active'], ENT_COMPAT, 'UTF-8'); } else { $id227af2c9c9dc7fb91df7f7576cb79df3d47aaf4 = 0; } $this->use_template_name = $this->use_template = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['use_template'], ENT_COMPAT, 'UTF-8'); if(!strlen($i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624)) { $this->_errors[] = v_customersms_invalidtext; return self::POST_ERROR; } $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_customers WHERE name='" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03) . "' AND status=" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09) . " AND mutation='" . $this->escape($this->use_template) . "'"); $this->Execute("INSERT INTO " . DB_PREFIX . "sp_hooks_customers VALUES ('" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03) . "'," . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09) . ",'" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624) . "','" . $this->escape($id227af2c9c9dc7fb91df7f7576cb79df3d47aaf4) . "','" . $this->escape($this->use_template) . "')"); $this->displayConfirmation(v_customersms_smssaved); return self::POST_OK; } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['submitDeleteMutation_x'])) { if(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['area'])) { $iff3ebb3dc09765074cbc44bf85648fbb313741d9 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['area'], ENT_COMPAT, 'UTF-8'); } $this->use_template = htmlentities($ifab26c5df1e4ac29b64e0a4796b1f9165fe614a8['use_template'], ENT_COMPAT, 'UTF-8'); $this->use_template_name = $this->use_template; $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_customers WHERE mutation='" . $this->escape($iff3ebb3dc09765074cbc44bf85648fbb313741d9) . "'"); $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_templates WHERE area='" . $this->escape($iff3ebb3dc09765074cbc44bf85648fbb313741d9) . "'"); $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_unicode WHERE area='" . $this->escape($iff3ebb3dc09765074cbc44bf85648fbb313741d9) . "' AND type='customer'"); if($this->use_template == $iff3ebb3dc09765074cbc44bf85648fbb313741d9) { $this->displayConfirmation(v_customersms_smsdeleted); $this->fastRedirect($this->getLink($i6b496fee24729ce6f7683ba88d5a87d6130049b5["route"])); } $this->displayConfirmation(v_customersms_smsdeleted); return self::POST_OK; } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['submitAddMutation'])) { $iab6a314decb74f5c532ecb082cfeb1655b9e98bb = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['country'], ENT_COMPAT, 'UTF-8'); if(strlen($iab6a314decb74f5c532ecb082cfeb1655b9e98bb) > 0) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = explode(";", $iab6a314decb74f5c532ecb082cfeb1655b9e98bb); $this->use_template = $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[0]; $this->use_template_name = $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[1] . " ( " . $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[0] . ")"; $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_templates WHERE area='" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[0]) . "'"); $this->Execute("INSERT INTO " . DB_PREFIX . "sp_hooks_templates VALUES ('" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[0]) . "','" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[1]) . "') "); $this->displayConfirmation(v_customersms_versionfor . $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[1] . v_customersms_wassaved); return self::POST_OK; } } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['submitCustomerUnicode'])) { if(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18['unicode'])) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24 = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['unicode'], ENT_COMPAT, 'UTF-8'); } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24 = 0; } $this->use_template_name = $this->use_template = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['use_template'], ENT_COMPAT, 'UTF-8'); $this->use_template = htmlentities($icddcd508600972f2dab78cd14f7612aa4dc19a18['use_template'], ENT_COMPAT, 'UTF-8'); $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("DELETE FROM " . DB_PREFIX . "sp_hooks_unicode WHERE area='" . $this->escape($this->use_template) . "' and type='customer' "); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("INSERT INTO " . DB_PREFIX . "sp_hooks_unicode VALUE ('" . $this->escape($this->use_template) . "'," . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24) . ",'customer') "); } $this->displayConfirmation(v_customersms_unicodesaved); return self::POST_OK; } return self::POST_ERROR; } public function loadhooks() { foreach(SmsVariables::$hooks as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { if($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["owner"] != 1 && $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["owner"] != 0) { $this->res_groups[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['group']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']][] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']; $this->res_hooks_info[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['info']; $this->res_hooks_template[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['template2']; $this->res_hooks_notice[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['notice']; $this->res_hooks_background[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['background']; $this->res_hooks_icon[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['icon']; } } return true; } public function loadcustomerhooks($i05355412b857f5174e9a2f71b1e936a86ad60cd2af073e1bd0b4b82284b0eca702d390bd03489d03) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "sp_hooks_customers WHERE mutation LIKE '" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2af073e1bd0b4b82284b0eca702d390bd03489d03) . "'"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $this->res_hooks_customer[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = stripslashes($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['smstext']); $this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['name']][$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['status']] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['active']; } } return true; } private function f19c903003163c5fd13b5784fda3204bd086c372e() { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "sp_hooks_unicode WHERE area='" . $this->escape($this->use_template) . "' AND type='customer'"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $this->use_unicode = 1; } return ' <script language="javascript"> var unicode = ' . $this->use_unicode . '; </script> <fieldset> <legend><img src="' . self::$setingsImg . '" alt="' . v_customersms_unicodesms . '" /> ' . v_customersms_unicodesms . '</legend> <form action="" method="post"> <p>' . v_customersms_unicodetext . '</p> ' . self::getInput(array("type" => "checkbox", "name" => "unicode", "value" => 1), $this->use_unicode) . ' ' . v_customersms_unicode . ' ' . self::getInput(array("type" => "submit", "name" => "submitCustomerUnicode", "value" => v_customersms_save, "class" => "button")) . ' ' . self::getInput(array("type" => "hidden", "name" => "use_template", "value" => $this->use_template)) . ' </form> </fieldset> '; } private function f3a5d89389e1e0c8afb0e051e976192ad06bf1ea7() { $iab6a314decb74f5c532ecb082cfeb1655b9e98bb = self::select_country(); $ic664c8fb4aed2fe6acd3d1b9253bfd83980ef6b7 = ""; $ie12d77c719c583bfbab3ae14a800ee49460f62fa = array(); $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = -1; foreach(SmsVariables::$countries as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { if($iab6a314decb74f5c532ecb082cfeb1655b9e98bb == $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4) { $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . ";" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952; } if(!in_array($i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4, $this->pol_templ)) { $ie12d77c719c583bfbab3ae14a800ee49460f62fa[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . ";" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952 . " (+" . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . ")"; } } return ' <fieldset> <legend><img src="' . self::$transImg . '" alt="" /> ' . v_customersms_addsms . '</legend> <form action="" method="post"> <table class="formTable"> <tr> <td class="w100 mutationForm">' . self::getLabel(v_customersms_country) . '</td> <td class="w100">' . self::getSelect(array("name" => "country"), $ie12d77c719c583bfbab3ae14a800ee49460f62fa, $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790) . '</td> <td class="w100">' . self::getInput(array("type" => "submit", "value" => v_customersms_add, "name" => "submitAddMutation", "class" => "button noMargin")) . '</td> <td rowspan="2">' . $this->loadMutations($this->use_template) . '</td> </tr> <tr> <td colspan="3"></td> </tr> </table> ' . self::getInput(array("type" => "hidden", "name" => "use_template", "value" => $this->use_template)) . ' </form> </fieldset> '; } private function fa6fd3ca6a20e0800b03f4b2a4ee3187a601193de($i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03, $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09, $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe, $id227af2c9c9dc7fb91df7f7576cb79df3d47aaf4, $i05355412b857f5174e9a2f71b1e936a86ad60cd28a1c4f7b7114b92a37dc6b62516e7378c1abb7c4) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ' <form name="form' . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . '" action="" method="post" class="ajax"> <table class="formTable"> <tr> <td class="bottom padv0">' . self::getLabel(v_customersms_smstext) . '</td> <td class="bottom padv0">' . self::getLabel(v_customersms_preview, 'id="label' . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . '"') . '</td> <td colspan="3">' . self::getLabel(v_customersms_active) . '</td> </tr> <tr> <td rowspan="2" class="hookTextArea top">' . self::getTextArea(array("name" => "text", "id" => "textArea" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09, "onchange" => "countHook('" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . "')", "onkeyup" => "countHook('" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . "')", "style" => "width:290px;height:100px;"), $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe) . '</td> <td rowspan="2" class="hookTextArea top">' . self::getTextArea(array("id" => "textfake" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09, "name" => "textfake", "disabled" => "disabled", "style" => "width:290px;height:100px;")) . '</td> <td colspan="3">' . self::getInput(array("type" => "checkbox", "name" => "active", "value" => 1), $id227af2c9c9dc7fb91df7f7576cb79df3d47aaf4) . ' ' . v_customersms_active . '</td> </tr> <tr> <td class="top w50">' . self::getInput(array("type" => "submit", "value" => v_customersms_save, "name" => "submitCustomerSMS", "class" => "button")) . '</td> <td class="top w50">' . self::getInput(array("type" => "button", "value" => v_customersms_cancel, "title" => v_customersms_restoreunsaved, "class" => "button", "onClick" => "this.form.reset();countHook('" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . "')")) . '</td> <td></td> </tr> <tr> <td colspan="5">' . v_smsprestashop_notice . '<br /><br />' . $this->noticeEval($i05355412b857f5174e9a2f71b1e936a86ad60cd28a1c4f7b7114b92a37dc6b62516e7378c1abb7c4, $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09) . '</td> </tr> </table> ' . self::getInput(array("type" => "hidden", "name" => "status", "value" => "$i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09")) . ' ' . self::getInput(array("type" => "hidden", "name" => "ajax-id", "value" => "" . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . "")) . ' ' . self::getInput(array("type" => "hidden", "name" => "name", "value" => "$i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03")) . ' ' . self::getInput(array("type" => "hidden", "name" => "use_template", "value" => $this->use_template)) . ' </form> <script language="javascript"> countHook(\'' . $i05355412b857f5174e9a2f71b1e936a86ad60cd26b378f203f89073d2d6f4239eef67bf1db322d03 . $i05355412b857f5174e9a2f71b1e936a86ad60cd247f22955fae729a8a5c6dc19913d0cdcb6b27e09 . '\'); </script> '; return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } public function loadMutations($i05355412b857f5174e9a2f71b1e936a86ad60cd2465a8b7201badbc968016c38c09450ea6ad0d1d5) { if($i05355412b857f5174e9a2f71b1e936a86ad60cd2465a8b7201badbc968016c38c09450ea6ad0d1d5 == "default") { $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = ' class="selectedMutation"'; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = ""; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ' <table class="resultTable noPadding"> <tbody> <tr> <td class="right"><a ' . $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 . ' href="' . $this->smsLinkCustomerSMSMutation(). '">' . v_customersms_default . '</a></td> <td class="w50"></td> <td class="w50"></td> </tr> '; $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "sp_hooks_templates order by area_text"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { if($i05355412b857f5174e9a2f71b1e936a86ad60cd2465a8b7201badbc968016c38c09450ea6ad0d1d5 == $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area']) { $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = ' class="selectedMutation"'; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 = ""; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <tr> <td class="right"><a ' . $i05355412b857f5174e9a2f71b1e936a86ad60cd20b528d1be9ee802a3400dc2dc8e66f5f242b1790 . ' href="'.$this->smsLinkCustomerSMSMutationSelect($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["area"]).'">' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["area_text"] . '</a></td> <td class="w50 right">(+' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area'] . ')</td> <td class="w50 center"> <form action="" method="post" onsubmit="return confirm(\'' . v_customersms_confirmdelete . ' ' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["area_text"] . '?\');"> ' . self::getInput(array("type" => "image", "src" => self::$adminDelete, "name" => "submitDeleteMutation", "alt" => v_customersms_langdelete . " " . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area_text'], "title" => v_customersms_langdelete . " " . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area_text'])) . ' <input type="hidden" name="area" value="' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["area"] . '" /> <input type="hidden" name="use_template" value="' . $i05355412b857f5174e9a2f71b1e936a86ad60cd2465a8b7201badbc968016c38c09450ea6ad0d1d5 . '" /> </form> </td> </tr> '; } } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' </tbody> </table> '; return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } public function loadMutationsnav($iff3ebb3dc09765074cbc44bf85648fbb313741d9) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM " . DB_PREFIX . "sp_hooks_templates order by area_text"); $this->pol_templ = array(); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $this->pol_templ[] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area']; if($iff3ebb3dc09765074cbc44bf85648fbb313741d9 == $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area']) { $this->use_template_name = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area_text'] . " (+" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['area'] . ")"; } } } } public function ajaxSubmitCustomerSMS($i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af) { $this->setAction($i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["ajax-id"]); $this->disableScrollUp(); $this->loadcustomerhooks($i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["use_template"]); if(isset($this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["name"]][$i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["status"]]) && $this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["name"]][$i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["status"]] > 0) { $this->sendSnippet("active" . $i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["name"] . $i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["status"], '<span style="cursor:help;" title="' . v_customersms_smsactive . '"><img src="' . self::$acceptImg . '" alt="' . v_customersms_smsactive . '" /></span>'); } else { $this->sendSnippet("active" . $i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["name"] . $i05355412b857f5174e9a2f71b1e936a86ad60cd2155692153d303819c686ffc9239bf6b5e4dac9af["status"], '<span style="cursor:help;" title="' . v_customersms_smsnotactive . '"><img src="' . self::$denyImg . '" alt="' . v_customersms_smsnotactive . '" /></span>'); } } private function f272209a3143829a75b04748251af15ce810cbb18() { $i0f4e2508684ab2ad389d218aaf13edfc84ad4936 = array(0 => v_customersms_orderstatus, 1 => v_customersms_order, 2 => v_customersms_account, 3 => v_adminsms_product, 4 => v_contact_form, 5 => v_hook_return); $i05355412b857f5174e9a2f71b1e936a86ad60cd2805c055e5cbce86c3778eadfff1612d7db8f1978 = array(0 => self::$orderImg, 1 => self::$orderImg, 2 => self::$adminCustomerImg, 3 => self::$catalogImg, 4 => self::$catalogImg, 5 => self::$sendImg); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; for($i05355412b857f5174e9a2f71b1e936a86ad60cd2 = 0; $i05355412b857f5174e9a2f71b1e936a86ad60cd2 < 6; $i05355412b857f5174e9a2f71b1e936a86ad60cd2++) { if(!isset($this->res_groups[$i05355412b857f5174e9a2f71b1e936a86ad60cd2])) { continue; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <fieldset> <legend><img src="' . $i05355412b857f5174e9a2f71b1e936a86ad60cd2805c055e5cbce86c3778eadfff1612d7db8f1978[$i05355412b857f5174e9a2f71b1e936a86ad60cd2] . '" alt="" /> ' . $i0f4e2508684ab2ad389d218aaf13edfc84ad4936[$i05355412b857f5174e9a2f71b1e936a86ad60cd2] . '</legend> <table class="resultTable"> <tbody> '; foreach($this->res_groups[$i05355412b857f5174e9a2f71b1e936a86ad60cd2] as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe as $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db) { if(isset($this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]) && $this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4] > 0) { $i4f493e441cc60b6a3540d5647c6fbcf3f2d966fc = '<span id="snippet-active' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '"><span style="cursor:help;" title="' . v_customersms_smsactive . '"><img src="' . self::$acceptImg . '" alt="' . v_customersms_smsactive . '" /></span></span>'; } else { $i4f493e441cc60b6a3540d5647c6fbcf3f2d966fc = '<span id="snippet-active' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '"><span style="cursor:help;" title="' . v_customersms_smsnotactive . '"><img src="' . self::$denyImg . '" alt="' . v_customersms_smsnotactive . '" /></span></span>'; } if(isset($this->res_hooks_customer[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]) && strlen($this->res_hooks_customer[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]) > 0) { $i2565c1ff36c1fabfc4e5940cddc433992e971682 = $this->res_hooks_customer[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]; } else { $i2565c1ff36c1fabfc4e5940cddc433992e971682 = $this->res_hooks_template[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <tr ' . self::isEven($i05355412b857f5174e9a2f71b1e936a86ad60cd2f3b517d335a2b4ef26a37d2656c41c234b2a734a, "even") . '> <td> <a id="displayText' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '" href="javascript:" class="noUnderline" onclick="toggleInfo(\'' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '\');"> <img src="' . self::$plusImg . '" id="toggleButton' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '"/> ' . (($i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db == "actionOrderStatusPostUpdate") ? (v_customersms_statusupdate) : ($i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db)) . ' - <span class="orderStatusHighlight" '.(defined("SMS_ENABLE_COLOR")?('style="border: 2px solid '.$this->res_hooks_background[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4].';"'):"").'>' . $this->res_hooks_info[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4] . '</span> </a> </td> <td class="right middle">' . self::getAjaxLoader($i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4) . ' ' . $i4f493e441cc60b6a3540d5647c6fbcf3f2d966fc . '</td> </tr> <tr class="hidden" id="toggleText' . $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db . $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 . '"> <td colspan="2">' . $this->fa6fd3ca6a20e0800b03f4b2a4ee3187a601193de( $i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db, $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4, $i2565c1ff36c1fabfc4e5940cddc433992e971682, ((isset($this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4])) ? ($this->res_hooks_active[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]) : (array())), ((isset($this->res_hooks_notice[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4])) ? ($this->res_hooks_notice[$i05355412b857f5174e9a2f71b1e936a86ad60cd285c6076c1c6fb2e7d2b610684d517127febaf6db][$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]) : (array())) ) . ' </td> </tr> '; } } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' </tbody> </table> </fieldset> '; } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } } 